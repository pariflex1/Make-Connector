<!DOCTYPE html>
<html>  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>Registration Form in HTML CSS</title>
    <!---Custom CSS File--->
    <link rel="stylesheet" href="style.css" />
  </head>
   <style>
/* Import Google font - Poppins */
@import url("https://fonts.googleapis.com/css2?family=Poppins:wght@200;300;400;500;600;700&display=swap");
* {
  margin: 10;
  padding: 10;
  box-sizing: border-box;
  font-family: "Poppins", sans-serif;
}


/*Responsive*/
@media screen and (max-width: 500px) {
  .form .column {
    flex-wrap: wrap;
  }
  .form :where(.gender-option, .gender) {
    row-gap: 15px;
  }
}  
input[type=text], select {
      width: 100%;
      padding: 12px 20px;
      margin: 8px 0;
      display: inline-block;
      border: 1px solid #ccc;
      border-radius: 4px;
      box-sizing: border-box;
      }
      input[type=tel], select {
      width: 100%;
      padding: 12px 20px;
      margin: 8px 0;
      display: inline-block;
      border: 1px solid #ccc;
      border-radius: 4px;
      box-sizing: border-box;
      }
       input[type=date], select {
      width: 100%;
      padding: 12px 20px;
      margin: 8px 0;
      display: inline-block;
      border: 1px solid #ccc;
      border-radius: 4px;
      box-sizing: border-box;
      }
      .button {
      width: 100%;
      background-color: #826AFB;
      color: white;
      padding: 14px 20px;
      margin: 8px 0;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      }
      

      
   </style>
   <body>
      <form id="form" class="container m-4 pl-4" method="POST">
         <div class="field">
            <div class="control">
               <input type="hidden" name="School" value="KVA-3" />
            </div>
         </div>
         <select name="Class"  required>
            <option value="">--Select Class--</option>
            <option value="1st">1</option>
            <option value="2nd">2</option>
            <option value="3rd">3</option>
            <option value="4th">4</option>
            <option value="5th">5</option>
            <option value="6th">6</option>
            <option value="7th">7</option>
            <option value="8th">8</option>
            <option value="9th">9</option>
            <option value="10th">10</option>
            <option value="11th">11</option>
            <option value="12th">12</option>
         </select>

<input type="radio" required id="A" name="Section" value="A">
  <label for="A">Sec-A</label>
  <input type="radio"  id="B" name="Section" value="B">
  <label for="B">Sec-B</label>
  <input type="radio"  id="C" name="Section" value="C">
  <label for="C">Sec-C</label>

         <div class="field">
         <div class="control">
         <input class="input" type="tel" placeholder="Role Number" name="Role Number" required />
         <div class="field">
         <div class="control">
         <input class="input" type="tel" placeholder="Admission Number" name="Admission No." required />
         <div class="field">
            <div class="control">
               <input class="input" type="text" placeholder="Name" name="Name" required />
            </div>
         </div>
         <div class="field">
            <div class="control">
               <input class="input" type="text" placeholder="Father's Name" name="Father's Name" required />
            </div>
         </div>
         <div class="field">
         <div class="control">
         <input class="input" type="tel" placeholder=" Contact" name="Contact" pattern="[0-9]{10}" required />
         <div class="field">
            <div class="field">
               <div class="control">
                  <input class="input" type="text" placeholder="Address" name="Address" required />
               </div>
            </div>
            <div class="control">
              
  <select name="Blood Group"  required>
            <option value="">--Select Blood Group--</option>
            <option value="A+">A+</option>
            <option value="B+">B+</option>
            <option value="O+">O+</option>
            <option value="AB">AB</option>
            <option value="A-">A-</option>
            <option value="B-">B-</option>
            <option value="O-">O-</option>
            <option value="AB-">AB-</option>
            </select>
<label> Date of Birth </label><br>  <input class="input" type="date" placeholder="Date of Birth" name="Date of Birth" required />
            </div>
         </div>
  
         
         
         <div class="field is-grouped">
            <div class="control">
               <button class="button is-primary" type="submit" id="submit-button">
               Send
               </button>
            </div>
         </div>
      </form>
      <div id="message" style="
         display: none;
         margin: 20px;
         font-weight: bold;
         color: green;
         padding: 8px;
         background-color: beige;
         border-radius: 4px;
         border-color: aquamarine;
         "></div>
      <script>
         document.getElementById("form").addEventListener("submit", function (e) {
            e.preventDefault(); // Prevent the default form submission
            document.getElementById("message").textContent = "Submitting..";
            document.getElementById("message").style.display = "block";
            document.getElementById("submit-button").disabled = true;
          
            // Collect the form data
            var formData = new FormData(this);
            var keyValuePairs = [];
            for (var pair of formData.entries()) {
              keyValuePairs.push(pair[0] + "=" + pair[1]);
            }
          
            var formDataString = keyValuePairs.join("&");
          
            // Send a POST request to your Google Apps Script
            fetch(
              "https://script.google.com/macros/s/AKfycbxZ_3PfKEZrgTC1Wm8s1Zebb1DOO4ra2nvhZQxjS3fMrOljJk7W1y1wN1hcJvoVPZ4u/exec",
              {
                redirect: "follow",
                method: "POST",
                body: formDataString,
                headers: {
                  "Content-Type": "text/plain;charset=utf-8",
                },
              }
            )
              .then(function (response) {
                // Check if the request was successful
                if (response) {
                  return response; // Assuming your script returns JSON response
                } else {
                  throw new Error("Failed to submit the form.");
                }
              })
              .then(function (data) {
                // Display a success message
                document.getElementById("message").textContent =
                  "Data submitted successfully!";
                document.getElementById("message").style.display = "block";
                document.getElementById("message").style.backgroundColor = "green";
                document.getElementById("message").style.color = "beige";
                document.getElementById("submit-button").disabled = false;
                document.getElementById("form").reset();
          
                setTimeout(function () {
                  document.getElementById("message").textContent = "";
                  document.getElementById("message").style.display = "none";
                }, 2600);
              })
              .catch(function (error) {
                // Handle errors, you can display an error message here
                console.error(error);
                document.getElementById("message").textContent =
                  "An error occurred while submitting the form.";
                document.getElementById("message").style.display = "block";
              });
          });
          
      </script>
   </body>
</html>
